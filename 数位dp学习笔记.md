## 一、题目

数位dp的题目一般是：求出区间 $[l,r]$ 中“含有 / 不含数字 $x$”“从左到右各位不降”“相邻两位差为2” 的数的个数，总之都与数位有关。

区间长度一般比较大，一般是 $1 \leq l \leq r \leq 2^{31}-1$ 或者 $1 \leq l \leq r \leq 2^{63}-1$ 。

## 二、暴力

前缀和思想，先把问题转化到区间 $[1,l],[1,r]$。

- 暴力1： $O(n)$ 扫一遍区间，对于每个数 $O(\lg n)$ 扫一遍看看符不符合；
- 暴力2： dfs 每一位放什么数，时间复杂度 $T(n\times 10)$。

暴力 2 明显更好优化。

## 三、优化

首先，搜索时会出现大量重复状态。比如，第一位填了 1 ，第二位要考虑一遍 0 到 9 ；第一位填 2 的时候，第二位还是要考虑 0 到 9，不难想到**记忆化**。

再考虑有哪些状态显然不行：如果区间是 $[1,3567]$ ，第一位显然不能填大于 3 的数。如果第一位填了 3 ，那第二位不能填大于 5 的数，但如果第一位是 2 ，那第二位就没有限制了。所以可以加一个状态记录“前面的数位是否压上限”，为真则本位也只能枚举到原数上限，否则可以遍历 0 到 9。

通过的几道题目：[U163166 Bomb](https://www.luogu.com.cn/problem/U163166)，
[T130742 数字游戏](https://www.luogu.com.cn/problem/T130742)，
[P2657 [SCOI2009] windy 数](https://www.luogu.com.cn/problem/P2657)